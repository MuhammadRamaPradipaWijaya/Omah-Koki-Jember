{% include 'ad_header.html' %} {% include 'ad_navbar.html' %} {% include
'ad_sidebar.html' %}

<div class="bg-light rounded h-100 p-4">
  <h6 class="mb-4">LAPORAN PRODUK</h6>

  <!-- <div class="row">
    <div class="col-md-3">
      <div class="row">
        <label for="fromInput" class="col-form-label col-2">Dari</label>
        <div class="col-10">
          <input type="date" class="form-control" id="fromInput" />
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="row">
        <label for="toInput" class="col-form-label col-2">Ke</label>
        <div class="col-10">
          <input type="date" class="form-control" id="toInput" />
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <button class="btn btn-primary rounded-pill">Filter</button>
    </div>
  </div> -->

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>No</th>
        <th>Nama Produk</th>
        <th>Harga</th>
        <th>Stok</th>
        <th>Jumlah Terjual</th>
        <th>Total Penjualan Produk</th>
        <th>Aksi</th>
      </tr>
    </thead>
    <tbody>
      {% for item in produk %}
      <tr>
        <td>{{ loop.index }}</td>
        <td>{{ item.nama_produk }}</td>
        <td>Rp. {{ "{:,.0f}".format(item.harga).replace(",", ".") }}</td>
        <td>{{ item.stock }}</td>
        <td>{{ item.jumlah_terjual }}</td>
        <td>Rp. {{ "{:,.0f}".format(item.total_penjualan).replace(",", ".") }}</td>
        <td>
          <button
            class="btn btn-primary rounded-pill"
            data-bs-toggle="modal"
            data-bs-target="#exampleModal{{ loop.index }}"
          >
            Detail
          </button>

          <!-- Modal -->
          <div
            class="modal fade"
            id="exampleModal{{ loop.index }}"
            tabindex="-1"
            aria-labelledby="exampleModal{{ loop.index }}Label"
            aria-hidden="true"
          >
            <div class="modal-dialog modal-xl">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="exampleModal{{ loop.index }}Label">
                    Detail Laporan Produk
                  </h1>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="modal"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-lg-6">
                      <table class="table">
                        <tr>
                          <td class="col-3">Nama Produk</td>
                          <td>:</td>
                          <td>{{ item.nama_produk }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Stok</td>
                          <td>:</td>
                          <td>{{ item.stock }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Harga</td>
                          <td>:</td>
                          <td>{{ item.harga }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Kondisi</td>
                          <td>:</td>
                          <td>{{ item.kondisi }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Berat</td>
                          <td>:</td>
                          <td>{{ item.berat }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Kategori</td>
                          <td>:</td>
                          <td>{{ item.kategori }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Panjang</td>
                          <td>:</td>
                          <td>{{ item.panjang }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Tinggi</td>
                          <td>:</td>
                          <td>{{ item.tinggi }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Lebar</td>
                          <td>:</td>
                          <td>{{ item.lebar }}</td>
                        </tr>
                        <tr>
                          <td class="col-3">Deskripsi</td>
                          <td>:</td>
                          <td>{{ item.deskripsi }}</td>
                        </tr>
                      </table>
                    </div>
                    <div class="col-lg-6">
                      <table class="table">
                        <tr>
                          <td>Jumlah Terjual</td>
                          <td>:</td>
                          <td>{{ item.jumlah_terjual }}</td>
                        </tr>
                        <tr>
                          <td>Total Penjualan</td>
                          <td>:</td>
                          <td>Rp. {{ "{:,.0f}".format(item.total_penjualan).replace(",", ".") }}</td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="modal-footer">
                  <button
                    type="button"
                    class="btn btn-secondary rounded-pill"
                    data-bs-dismiss="modal"
                  >
                    Tutup
                  </button>
                </div>
              </div>
            </div>
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <th colspan="5" class="text-end">Total Penjualan Produk</th>
        <td>Rp. {{ "{:,.0f}".format(produk | sum(attribute='total_penjualan')).replace(",", ".") }}</td>
        <td>
          <button
            class="btn btn-success rounded-pill"
            onclick="window.open('/adlproduk/cetak', '_blank')"
          >
            Cetak
          </button>
        </td>
      </tr>
    </tfoot>
  </table>
</div>

{% include 'ad_footer.html' %}
