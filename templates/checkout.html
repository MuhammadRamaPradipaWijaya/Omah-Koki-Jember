{% include 'header.html' %} {% include 'navbar.html' %}

<br /><br /><br />
<div class="container">
  <div class="row justify-content-center">
    <div class="col-xl-10 col-md-10">

      <div class="container-fluid pt-4 px-4">
        <h6 class="mb-6"><strong>CHECKOUT</strong></h6><br>
        <div class="row g-4">
          <div class="col-sm-12 col-xl-6">
            <div class="bg-light rounded p-4">
              <h6 class="mb-0">Informasi Pribadi</h6>
              <p class="mb-0"><strong>{{ session['username'] }}</strong></p>
              <p class="mb-0"><strong>{{ session['email'] }}</strong></p>
              <div class="d-flex align-items-center justify-content-between mb-4">
                <p class="mb-0"><strong>{{ session['telepon'] }}</strong></p>
                <button type="button" class="btn btn-sm btn-danger rounded-pill m-2">
                  Ubah
                </button>
              </div>
              <strong>
                <hr style="border: none; height: 5px; background-color: #f33f3f" />
              </strong>
              <form method="POST" action="{{ url_for('checkout') }}">
                <div class="d-flex align-items-center justify-content-between">
                  <div class="mb-3">
                    <label for="jalan" class="form-label">Jalan</label>
                    <input type="text" class="form-control" id="jalan" name="jalan" required />
                  </div>
                  <div class="mb-3">
                    <label for="rt_rw" class="form-label">RT/RW</label>
                    <input type="text" class="form-control" id="rt_rw" name="rt_rw" required />
                  </div>
                </div>
                <div class="mb-3">
                  <label for="kelurahan_desa" class="form-label">Kelurahan/Desa</label>
                  <input type="text" class="form-control" id="kelurahan_desa" name="kelurahan_desa" required />
                </div>
                <div class="mb-3">
                  <label for="kecamatan" class="form-label">Kecamatan</label>
                  <input type="text" class="form-control" id="kecamatan" name="kecamatan" required />
                </div>
                <div class="mb-3">
                  <label for="provinsi" class="form-label">Provinsi</label>
                  <select class="form-select mb-3" id="provinsi" name="provinsi" required>
                    <option selected disabled>Pilih Provinsi</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="kota_kabupaten" class="form-label">Kota/Kabupaten</label>
                  <select class="form-select mb-3" id="kota_kabupaten" name="kota_kabupaten" required>
                    <option selected disabled>Pilih Kota/Kabupaten</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="kode_pos" class="form-label">Kode Pos</label>
                  <input type="text" class="form-control" id="kode_pos" name="kode_pos" required style="width: 30%;" />
                </div>
              </form>
            </div>
          </div>

          <div class="col-sm-13 col-xl-6">
            <div class="bg-light text-center rounded p-4">
              <h6>Ringkasan Belanja</h6>
              {% for item in items_keranjang %}
              <div class="card mb-4">
                <div class="card-body">
                  <div class="d-sm-flex justify-content-between">
                    <div class="media d-block d-sm-flex text-center text-sm-left">
                      <a class="cart-item-thumb mx-auto mr-sm-4" href="#"><img
                          src="{{ url_for('static', filename='ad_assets/imgproduk/' ~ item.gambar) }}" alt="Product"
                          style="object-fit: cover; max-width: 150px; max-height: 150px;"></a>
                      <div class="media-body pt-3">
                        <h3 class="product-card-title font-weight-semibold border-0 pb-0 ">
                          <a href="#"
                            style="display: inline-block; width: 200px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left;">
                            {{ item['nama_produk'] }}
                          </a>
                        </h3>
                        <div class="font-size-lg pt-2" style="text-align: left;">Rp {{ item['harga'] }}</div>
                        <div class="font-size-lg pt-2" style="text-align: left;">Jumlah: {{ item['jumlah'] }}</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
            <br>
            <div class="bg-light text-center rounded p-4">
              <strong>
                <hr style="border: none; height: 5px; background-color: #f33f3f" />
              </strong>
              <h6>Metode Pengirimian</h6>
              <select class="form-select mb-3 mx-auto" name="courier" id="courier" style="max-width: 250px; background-color: #dc3545; color:white;">
                <option selected disabled>Pilih Kurir</option>
                <option value="jne">JNE</option>
                <option value="pos">POS Indonesia</option>
                <option value="tiki">TIKI</option>
              </select>
              <strong>
                <hr style="border: none; height: 5px; background-color: #f33f3f" />
              </strong>
              <!-- Detail ringkasan belanja -->
              <div class="d-flex align-items-center justify-content-between">
                <div class="mb-3">
                  <p><strong>Total Produk : </strong></p>
                </div>
                <div class="mb-3">
                  <p id="subtotal"><strong>Rp 0</strong></p>
                </div>
              </div>
              <div class="d-flex align-items-center justify-content-between">
                <div class="mb-3">
                  <p><strong>Total Pengiriman : </strong></p>
                </div>
                <div class="mb-3">
                  <p id="shipping_cost"><strong>Rp. 0</strong></p>
                </div>
              </div>
              <strong>
                <hr style="border: none; height: 5px; background-color: black" />
              </strong>
              <div class="d-flex align-items-center justify-content-between">
                <div class="mb-3">
                  <p><strong>Total : </strong></p>
                </div>
                <div class="mb-3">
                  <p id="total"><strong>Rp. 0</strong></p>
                </div>
              </div>
              <strong>
                <hr style="border: none; height: 5px; background-color: black" />
              </strong>
              <button type="button" class="btn btn-danger rounded-pill m-2" data-bs-toggle="modal"
                data-bs-target="#ModalMetodePembayaran">Pilih Metode Pembayaran</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- modal metode pembayaran  -->
<div class="modal fade" id="ModalMetodePembayaran" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Pilih Pembayaran</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <a href="/pesanan" class="card">
        <div class="bg-light rounded p-4">
          <div class="card w-80">
            <div class="card-body">
              <p class="card-title"><strong>Nama Bank No. Rekening : 12345678910</strong></p>
              <p class="card-text">AN : Pemilik</p>
              <p class="card-text">Lakukan transfer sesuai dengan nominal yang tertera. <br>
                Ketika melakukan transfer diharapkan menambahkan kode pesanan pada nota transfer</p>
            </div>
          </div>
          <br>
        </div>
      </a>
    </div>
  </div>
</div>

{% include 'Footer.html' %}

<style>
  .product-card-title,
  .font-size-lg {
    margin-left: 20px;
  }

  .cart-item-thumb {
    display: block;
    width: 10rem;
  }

  .cart-item-thumb>img {
    display: block;
    width: 100%;
    border-radius: 15px;
  }

  .product-card-title>a {
    color: #222;
  }

  .font-weight-semibold {
    font-weight: 600 !important;
  }

  .product-card-title {
    display: block;
    margin-bottom: .75rem;
    padding-bottom: .875rem;
    border-bottom: 1px dashed #e2e2e2;
    font-size: 1rem;
    font-weight: normal;
  }

  .text-muted {
    color: #888 !important;
  }

  .bg-secondary {
    background-color: #f7f7f7 !important;
  }

  .accordion .accordion-heading {
    margin-bottom: 0;
    font-size: 1rem;
    font-weight: bold;
  }

  .font-weight-semibold {
    font-weight: 600 !important;
  }
</style>