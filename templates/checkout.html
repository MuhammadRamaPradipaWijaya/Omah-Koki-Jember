{% include 'header.html' %} {% include 'navbar.html' %}

<br /><br /><br />
<div class="container">
  <div class="row justify-content-center">
    <div class="col-xl-10 col-md-10">

      <div class="container-fluid pt-4 px-4">
        <h6 class="mb-6"><strong>CHECKOUT</strong></h6><br>
        <div class="row g-4">
          <div class="col-sm-12 col-xl-6">
            <div class="bg-light rounded p-4">
              <h6 class="mb-0">Informasi Pribadi</h6>
              <p class="mb-0"><strong>{{ session['username'] }}</strong></p>
              <p class="mb-0"><strong>{{ session['email'] }}</strong></p>
              <div class="d-flex align-items-center justify-content-between mb-4">
                <p class="mb-0"><strong>{{ session['telepon'] }}</strong></p>
                <button type="button" class="btn btn-sm btn-danger rounded-pill m-2">
                  Ubah
                </button>
              </div>
              <strong>
                <hr style="border: none; height: 5px; background-color: #f33f3f" />
              </strong>
              <form>
                <div class="d-flex align-items-center justify-content-between">
                  <div class="mb-3">
                    <label for="jalan" class="form-label">Jalan</label>
                    <input type="text" class="form-control" id="jalan" name="jalan" required />
                  </div>
                  <div class="mb-3">
                    <label for="rt_rw" class="form-label">RT/RW</label>
                    <input type="text" class="form-control" id="rt_rw" name="rt_rw" required />
                  </div>
                </div>
                <div class="mb-3">
                  <label for="kelurahan_desa" class="form-label">Kelurahan/Desa</label>
                  <input type="text" class="form-control" id="kelurahan_desa" name="kelurahan_desa" required />
                </div>
                <div class="mb-3">
                  <label for="kecamatan" class="form-label">Kecamatan</label>
                  <input type="text" class="form-control" id="kecamatan" name="kecamatan" required />
                </div>
                <div class="mb-3">
                  <label for="kota_kabupaten" class="form-label">Kota/Kabupaten</label>
                  <select class="form-select mb-3" id="kota_kabupaten" name="kota_kabupaten" required>
                    <option selected>Pilih</option>
                    {% for pengiriman in pengiriman_list %}
                    {% for zona, data_zona in pengiriman['zona'].items() %}
                    {% for kota in data_zona['kota-kabupaten'] %}
                    <option value="{{ kota }}">{{ kota }}</option>
                    {% endfor %}
                    {% endfor %}
                    {% endfor %}
                  </select>
                </div>
                <div class="d-flex align-items-center justify-content-between">
                  <div class="mb-3">
                    <label for="provinsi" class="form-label">Provinsi</label>
                    <input type="text" class="form-control" id="provinsi" name="provinsi" required
                      style="width: 290px;" />
                  </div>
                  <div class="mb-3">
                    <label for="kode_pos" class="form-label">Kode Pos</label>
                    <input type="text" class="form-control" id="kode_pos" name="kode_pos" required />
                  </div>
                </div>
              </form>
            </div>
          </div>

          <div class="col-sm-13 col-xl-6">
            <div class="bg-light text-center rounded p-4">
              <h6>Ringkasan Belanja</h6>
              {% for item in items_keranjang %}
              <div class="card mb-3 bg-danger text-white rounded-card mx-auto" style="max-width: 400px; height: auto;">
                <div class="row g-0">
                  <div class="col-md-4 d-flex align-items-center justify-content-center">
                    <img src="{{ url_for('static', filename='ad_assets/imgproduk/' + item['gambar']) }}"
                      class="img-fluid rounded-start" style="object-fit: cover; max-width: 150px; max-height: 150px;">
                  </div>
                  <div class="col-md-8">
                    <div class="card-body text-start">
                      <h6 class="card-title text-md-start text-center text-truncate">{{ item['nama_produk'] }}</h6>
                      <h6 class="card-title text-md-start text-center">Rp. {{ item['harga'] }} - Jumlah ({{ item['jumlah'] }})</h6>
                    </div>
                  </div>
                </div>
              </div>
              {% endfor %}
            </div>
            <br>
            <div class="bg-light text-center rounded p-4">
              <strong>
                <hr style="border: none; height: 5px; background-color: #f33f3f" />
              </strong>
              <h6>Metode Pengirimian</h6>
              <select class="form-select mb-3 mx-auto" aria-label="Default select example"
                style="max-width: 250px; background-color: #dc3545; color:white;">
                <option selected>Pilih</option>
                {% for pengiriman in pengiriman_list %}
                <option value="{{ pengiriman['_id'] }}">{{ pengiriman['jasa_kirim'] }}</option>
                {% endfor %}
              </select>
              <strong>
                <hr style="border: none; height: 5px; background-color: #f33f3f" />
              </strong>
              <div class="d-flex align-items-center justify-content-between">
                <div class="mb-3">
                  <p><strong>Total Produk : </strong></p>
                </div>
                <div class="mb-3">
                  <p><strong>Rp. {{ subtotal }}</strong></p>
                </div>
              </div>
              <div class="d-flex align-items-center justify-content-between">
                <div class="mb-3">
                  <p><strong>Total Pengiriman : </strong></p>
                </div>
                <div class="mb-3">
                  <p><strong>Rp. 0</strong></p>
                </div>
              </div>
              <strong>
                <hr style="border: none; height: 5px; background-color: black" />
              </strong>
              <div class="d-flex align-items-center justify-content-between">
                <div class="mb-3">
                  <p><strong>Total : </strong></p>
                </div>
                <div class="mb-3">
                  <p><strong>Rp. 0</strong></p>
                </div>
              </div>
              <strong>
                <hr style="border: none; height: 5px; background-color: black" />
              </strong>
              <button type="button" class="btn btn-danger rounded-pill m-2" data-bs-toggle="modal"
                data-bs-target="#ModalMetodePembayaran">Pilih Metode Pembayaran</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- modal metode pembayaran  -->
<div class="modal fade" id="ModalMetodePembayaran" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Pilih Pembayaran</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <a href="/pesanan" class="card">
        <div class="bg-light rounded p-4">
          {% for pembayaran in pembayaran_list %}
            <div class="card w-80">
              <div class="card-body">
                <p class="card-title"><strong>{{ pembayaran['Nama_Bank'] }} No. Rekening : {{ pembayaran['No_Rek'] }}</strong></p>
                <p class="card-text">AN : {{ pembayaran['Pemilik_Rek'] }}</p>
                <p class="card-text">Lakukan transfer sesuai dengan nominal yang tertera. <br>
                Ketika melakukan transfer diharapkan menambahkan kode pesanan pada nota transfer</p>
              </div>
            </div>
            <br>
            {% endfor %}
        </div>
      </a>
    </div>
  </div>
</div>


{% include 'Footer.html' %}