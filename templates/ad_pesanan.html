{% include 'ad_header.html' %}
{% include 'ad_navbar.html' %}
{% include 'ad_sidebar.html' %}

<div class="bg-light rounded h-100 p-4">
  <h6 class="mb-4">DATA PESANAN</h6>
  <div class="table-responsive">
    <table class="table table-bordered">
      <thead class="bg-danger text-white">
        <tr>
          <th scope="col">No</th>
          <th scope="col">No. Pesanan</th>
          <th scope="col">Nama Pelanggan</th>
          <th scope="col">Tanggal</th>
          <th scope="col">Status</th>
          <th scope="col" class="text-center">Aksi</th>
        </tr>
      </thead>
      <tbody>
        {% for pesanan in list_pesanan %} 
        <tr>
          <th scope="row">{{loop.index}}</th>
          <td>{{pesanan.nomor_pesanan}}</td>
          <td>{{pesanan.nama}}</td>
          <td>{{pesanan.tanggal_pesanan}}</td>
          <td><span class="bg-warning text-dark">{{ pesanan.status }}</span></td>
          <td class="text-center">
            <button class="btn btn-sm btn-danger rounded-pill">Batal</button>
            <button class="btn btn-sm  btn-primary rounded-pill" data-bs-toggle="modal" data-bs-target="#Detail{{pesanan._id}}">Detail</button>
            <button class="btn btn-sm btn-success rounded-pill">Lunas</button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Modal -->
 {% for pesanan in list_pesanan %}
  
<div class="modal fade" id="Detail{{pesanan._id}}" tabindex="-1" aria-labelledby="exampleModalLabel{{pesanan._id}}" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel{{pesanan._id}}">Detail Pesanan</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-lg-4">
            <table class="table">
              <tr>
                <td class="col-3">Nama</td>
                <td>:</td>
                <td>{{pesanan.nama}}</td>
              </tr>
              <tr>
                <td class="col-3">Email</td>
                <td>:</td>
                <td>{{pesanan.email}}</td>
              </tr>
              <tr>
                <td class="col-3">No. HP</td>
                <td>:</td>
                <td>{{pesanan.telepon}}</td>
              </tr>
              <tr>
                <td class="col-3">Alamat</td>
                <td>:</td>
                <td>{{pesanan.alamat}}</td>
              </tr>
              <tr>
                <td class="col-3">No. Psn</td>
                <td>:</td>
                <td>{{pesanan.nomor_pesanan}}</td>
              </tr>
              <tr>
                <td class="col-3">M. Kirim</td>
                <td>:</td>
                <td>{{pesanan.metode_pengiriman}}</td>
              </tr>
              <tr>
                <td class="col-3">M. Bayar</td>
                <td>:</td>
                <td>{{pesanan.metode_pembayaran}} <br>
                    {{pesanan.no_rek}} <br>
                    {{pesanan.pemilik_rek}}</td>
              </tr>
            </table>
          </div>
          <div class="col-lg-4">
            <h5>Daftar produk</h5>
            <ul>
              {% for item in pesanan.ringkasan_belanja %}
              <li>
                <h6>{{item.nama_produk}}</h6>
                <table>
                  <tr>
                    <td>Harga</td>
                    <td>:</td>
                    <td>Rp. {{item.harga}}</td>
                  </tr>
                  <tr>
                    <td>Jumlah</td>
                    <td>:</td>
                    <td>{{item.jumlah}}</td>
                  </tr>
                </table>
              </li>
              {% endfor %}
            </ul>
            <p>Total Pengiriman : Rp. {{pesanan.total_pengiriman}} <br>
              Total Penjualan : Rp. {{pesanan.total_semuanya}}
            </p>
          </div>
          <div class="col-lg-4">
            <h5>Status Pesanan</h5>
            <div class="alert alert-warning py-2">Pending</div>
            <hr>
            <h5>Bukti Transfer</h5>
            <a href="../static/assets/images/client-01.png" data-lightbox="gambar" data-title="Gambar Status Pesanan">
              <img src="../static/assets/images/client-01.png" alt="Gambar Status Pesanan"
                style="max-width: 100%; height: auto; display: block;">
            </a>
          </div>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
      </div>
    </div>
  </div>
</div>
{% endfor %}

{% include 'ad_footer.html' %}